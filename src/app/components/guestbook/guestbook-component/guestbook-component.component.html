<div class="main-component-container main-guestbook-container">
  <div class="guestbook-container-1">
    <guestbook-main-component
      [visibleEntriesCount]="visibleEntriesCount"
      [hiddenEntriesCount]="hiddenEntriesCount"
    ></guestbook-main-component>

    <div *ngIf="isLoading; else entriesContent">
      <div *ngFor="let i of [].constructor(entriesPerPage);" class="border shadow rounded-md p-4 w-full mx-auto mb-5">
        <div class="animate-pulse flex space-x-4">
          <div class="flex-1 space-y-6 py-1">
            <div class="h-2 bg-slate-200 rounded"></div>
            <div class="space-y-3">
              <div class="grid grid-cols-3 gap-4">
                <div class="h-2 bg-slate-200 rounded col-span-2"></div>
                <div class="h-2 bg-slate-200 rounded col-span-1"></div>
              </div>
              <div class="h-2 bg-slate-200 rounded"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!--    Todo should be inserted in animation -->
    <ng-template #entriesContent>
      <guestbook-entry-component
        *ngFor="let guestBookEntry of paginatedEntries"
        [entry]="guestBookEntry"
      ></guestbook-entry-component>
    </ng-template>

    <div *ngIf="!isLoading">
      <div
        *ngIf="((permissionService.hasPermission('view-invisible-guestbook-entries') | async) && hiddenEntriesCount == 0 && visibleEntriesCount == 0) || (!(permissionService.hasPermission('view-invisible-guestbook-entries') | async) && visibleEntriesCount == 0)">
        {{ hiddenEntriesCount }} vs {{ visibleEntriesCount }}
        <no-entries-component></no-entries-component>
      </div>
    </div>

    <guestbook-page-component
      [totalPages]="totalPages"
      [currentPage]="currentPage"
      (pageChange)="changePage($event)"
      (pageNext)="nextPage()"
      (pagePrevious)="previousPage()"
    ></guestbook-page-component>
  </div>
</div>

